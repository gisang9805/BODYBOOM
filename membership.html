<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>BODYBOOM 회원 가입 계약서</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f9f9f9;
    }
    .container {
      width: 95%;
      max-width: 600px;
      margin: 20px auto;
      padding: 15px;
      background-color: #ffffff;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #2c3e50;
      font-size: 20px;
      margin-bottom: 30px;
    }
    h3 {
      color: #2c3e50;
      font-size: 16px;
      margin-top: 30px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 25px;
      font-size: 14px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
      vertical-align: middle;
    }
    th {
      background-color: #ecf0f1;
      width: 35%;
    }
    input[type="text"],
    input[type="number"],
    input[type="date"],
    select {
      width: 100%;
      padding: 6px;
      box-sizing: border-box;
      font-size: 14px;
    }
    input[type="radio"] {
      margin-right: 5px;
    }
    input[readonly] {
      background-color: #f0f0f0;
    }
    .submit-button {
      background-color: #2980b9;
      color: white;
      padding: 10px 15px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
      display: block;
      width: 100%;
    }
    .submit-button:hover {
      background-color: #1e6ea7;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>BODYBOOM 회원 가입 계약서</h1>
  <form id="contractForm">
    <h3>② 회원권 정보</h3>
    <table>
      <tr>
        <th>회원권 종류</th>
        <td>
          <label><input type="radio" name="membership_type" value="헬스"> 헬스</label>
          <label><input type="radio" name="membership_type" value="헬스+스피닝"> 헬스+스피닝</label>
        </td>
      </tr>
      <tr>
        <th>선불 기간</th>
        <td>
          <select name="prepaid_months" id="prepaid_months">
            <option value="">선택</option>
            <option value="1">1개월</option>
            <option value="3">3개월</option>
            <option value="6">6개월</option>
            <option value="12">12개월</option>
          </select>
        </td>
      </tr>
      <tr>
        <th>계약 금액 (₩)</th>
        <td><input type="text" name="contract_amount" id="contract_amount" readonly></td>
      </tr>
      <tr>
        <th>운동복 (₩)</th>
        <td>
          <label><input type="radio" name="uniform" value="O">O</label>
          <label><input type="radio" name="uniform" value="X" checked>X</label>
          <input type="text" name="uniform_fee" id="uniform_fee" readonly>
        </td>
      </tr>
      <tr>
        <th>락커 (₩)</th>
        <td>
          <label><input type="radio" name="locker" value="O">O</label>
          <label><input type="radio" name="locker" value="X" checked>X</label>
          <input type="text" name="locker_fee" id="locker_fee" readonly>
        </td>
      </tr>
      <tr>
        <th>등록비 (₩)</th>
        <td>
          <label><input type="radio" name="registration" value="O" checked>O</label>
          <label><input type="radio" name="registration" value="X">X</label>
          <input type="text" name="registration_fee" id="registration_fee" readonly>
        </td>
      </tr>
      <tr>
        <th>총금액 (₩)</th>
        <td><input type="text" name="total_fee" id="total_fee" readonly></td>
      </tr>
    </table>
    <button type="submit" class="submit-button">계약서 제출</button>
  </form>
</div>

<script>
  const contractAmount = document.getElementById('contract_amount');
  const prepaidMonths = document.getElementById('prepaid_months');
  const uniformFee = document.getElementById('uniform_fee');
  const lockerFee = document.getElementById('locker_fee');
  const registrationFee = document.getElementById('registration_fee');
  const totalFee = document.getElementById('total_fee');

  const membershipRadios = document.querySelectorAll('input[name="membership_type"]');
  const uniformRadios = document.querySelectorAll('input[name="uniform"]');
  const lockerRadios = document.querySelectorAll('input[name="locker"]');
  const registrationRadios = document.querySelectorAll('input[name="registration"]');

  const prices = {
    '헬스': {1: 90000, 3: 240000, 6: 450000, 12: 840000},
    '헬스+스피닝': {1: 120000, 3: 330000, 6: 600000, 12: 1100000}
  };

  function parseNumber(str) {
    return parseInt(str.replace(/,/g, ''), 10) || 0;
  }

  function formatNumber(num) {
    return num.toLocaleString();
  }

  function updateContractAmount() {
    const type = document.querySelector('input[name="membership_type"]:checked')?.value;
    const months = parseInt(prepaidMonths.value);
    if (type && prices[type] && prices[type][months]) {
      contractAmount.value = formatNumber(prices[type][months]);
    } else {
      contractAmount.value = '';
    }
    updateTotal();
  }

  function updateExtras() {
    const months = parseInt(prepaidMonths.value) || 0;

    uniformFee.value =
      document.querySelector('input[name="uniform"]:checked')?.value === 'O'
        ? formatNumber(months * 10000)
        : '0';

    lockerFee.value =
      document.querySelector('input[name="locker"]:checked')?.value === 'O'
        ? formatNumber(months * 10000)
        : '0';

    registrationFee.value =
      document.querySelector('input[name="registration"]:checked')?.value === 'X'
        ? '20,000'
        : '0';

    updateTotal();
  }

  function updateTotal() {
    const total =
      parseNumber(contractAmount.value) +
      parseNumber(uniformFee.value) +
      parseNumber(lockerFee.value) +
      parseNumber(registrationFee.value);
    totalFee.value = formatNumber(total);
  }

  prepaidMonths.addEventListener('change', () => {
    updateContractAmount();
    updateExtras();
  });

  membershipRadios.forEach(radio => radio.addEventListener('change', updateContractAmount));
  uniformRadios.forEach(radio => radio.addEventListener('change', updateExtras));
  lockerRadios.forEach(radio => radio.addEventListener('change', updateExtras));
  registrationRadios.forEach(radio => radio.addEventListener('change', updateExtras));
</script>
</body>
</html>
